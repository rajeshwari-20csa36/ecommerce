<% if @comment.errors.any? %>
document.getElementById('comment_form').innerHTML = ("<%= escape_javascript(render :partial =>'comments/form', :locals => { comment: @comment} ) %>");
<% else %>
document.getElementById('comment-list').innerHTML = ("<%= escape_javascript(render :partial =>'comments/comments', :locals => { comments: @comments} ) %>");
document.getElementById('comment_form').innerHTML = ("<%= escape_javascript(render :partial =>'comments/form', :locals => { comment: @product.comments.new} ) %>");
<% end %>